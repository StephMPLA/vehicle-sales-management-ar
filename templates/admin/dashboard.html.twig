{% extends 'base.html.twig' %}
{% block title %}Admin — Dashboard{% endblock %}

{% block body %}
    <div class="min-h-screen bg-gray-100 p-6 space-y-8">

        {# ================= HEADER ================= #}
{#        <div class="bg-white rounded-xl shadow p-6 flex justify-between items-center">#}
{#            <div>#}
{#                <h1 class="text-2xl font-bold text-gray-800">Dashboard Admin</h1>#}
{#                <p class="text-sm text-gray-500">Pilotage véhicules & clients</p>#}
{#            </div>#}

{#            <div class="flex gap-3">#}
{#                <a href="#"#}
{#                   class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium">#}
{#                    + Nouveau véhicule#}
{#                </a>#}

{#                #}{# route future:#}
{#               path('app_admin_vehicle_new')#}
{#                #}
{#            </div>#}
{#        </div>#}

        {# ================= KPI ================= #}

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

            <div class="bg-white p-5 rounded-xl shadow">
                <p class="text-sm text-gray-500">Véhicules</p>
                <p class="text-3xl font-bold">
                    {{ vehicles }}
                </p>
            </div>

            <div class="bg-white p-5 rounded-xl shadow">
                <p class="text-sm text-gray-500">Clients</p>
                <p class="text-3xl font-bold">
                   {{ clients }}
                </p>
            </div>

            <div class="bg-white p-5 rounded-xl shadow">
                <p class="text-sm text-gray-500">Marques</p>
                <p class="text-3xl font-bold">
                    {{ brands }}
                </p>
                {# futur backend: brands repo #}
            </div>

{#            <div class="bg-white p-5 rounded-xl shadow">#}
{#                <p class="text-sm text-gray-500">Admin</p>#}
{#                <p class="text-sm font-semibold">#}
{#                    {{ app.user.email ?? '—' }}#}
{#                </p>#}
{#            </div>#}

        </div>

        {# ================= CLIENTS ================= #}

        <div class="bg-white rounded-xl shadow overflow-hidden">

            <div class="flex justify-between items-center p-4 border-b bg-gray-50">
                <h2 class="font-semibold">Clients</h2>

                <a href="#" class="text-sm text-blue-600 hover:underline">
                    Voir tout
                </a>
            </div>

            <table class="min-w-full text-sm">

                <thead class="bg-gray-50 text-xs uppercase text-gray-600">
                <tr>
                    <th class="px-4 py-3 text-left">Email</th>
                    <th class="px-4 py-3 text-left">Nom</th>
                    <th class="px-4 py-3 text-center">Actions</th>
                </tr>
                </thead>

                <tbody class="divide-y">

                {% for c in clients|default([])|slice(0,10) %}
                    <tr class="hover:bg-gray-50">
                        <td class="px-4 py-3">{{ c.email }}</td>
                        <td class="px-4 py-3">{{ c.name ?? '—' }}</td>

                        <td class="px-4 py-3 text-center">
                            <div class="flex justify-center gap-3 text-xs">
                                <a href="#" class="text-blue-600 hover:underline">Voir</a>
                                <a href="#" class="text-gray-600 hover:underline">Éditer</a>
                            </div>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="3" class="text-center py-8 text-gray-400">
                            Aucun client
                        </td>
                    </tr>
                {% endfor %}

                </tbody>
            </table>
        </div>

        {# ================= VEHICULES ================= #}

        <div class="bg-white rounded-xl shadow overflow-hidden">

            {# HEADER TABLE + FILTRES UI #}

            <div class="p-4 border-b bg-gray-50 space-y-4">

                <div class="flex justify-between items-center">
                    <h2 class="font-semibold">Véhicules</h2>

                    <div class="flex gap-2">

                        <a href="#"
                           class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded text-sm">
                            Ajouter
                        </a>

                        <a href="#"
                           class="bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded text-sm">
                            Supprimer sélection
                        </a>

                    </div>
                </div>

                {# FILTRES (UI only) #}

                <div class="grid md:grid-cols-5 gap-3">

                    <input placeholder="Recherche modèle..."
                           class="border rounded px-3 py-2 text-sm">

                    <select class="border rounded px-3 py-2 text-sm">
                        <option>Marque</option>
                    </select>

                    <select class="border rounded px-3 py-2 text-sm">
                        <option>Statut</option>
                    </select>

                    <select class="border rounded px-3 py-2 text-sm">
                        <option>Année</option>
                    </select>

                    <select class="border rounded px-3 py-2 text-sm">
                        <option>Trier par prix</option>
                    </select>

                </div>

            </div>

            {# TABLE #}

            <table class="min-w-full text-sm">

                <thead class="bg-gray-50 text-xs uppercase text-gray-600">
                <tr>
                    <th class="px-4 py-3"></th>
                    <th class="px-4 py-3 text-left">Nom</th>
                    <th class="px-4 py-3">Marque</th>
                    <th class="px-4 py-3">Année</th>
                    <th class="px-4 py-3">Prix</th>
                    <th class="px-4 py-3">Km</th>
                    <th class="px-4 py-3">Statut</th>
                    <th class="px-4 py-3">Actions</th>
                </tr>
                </thead>

                <tbody class="divide-y">

                {% for v in vehicles|default([]) %}
                    <tr class="hover:bg-gray-50">

                        <td class="px-4 py-3 text-center">
                            <input type="checkbox">
                        </td>

                        <td class="px-4 py-3 font-semibold">
                            {{ v.name }}
                        </td>

                        <td class="px-4 py-3 text-center">
                            {{ v.brand.name ?? '—' }}
                        </td>

                        <td class="px-4 py-3 text-center">
                            {{ v.year }}
                        </td>

                        <td class="px-4 py-3 text-center">
                            {{ v.price|number_format(0, ',', ' ') }} €
                        </td>

                        <td class="px-4 py-3 text-center">
                            {{ v.mileage|number_format(0, ',', ' ') }}
                        </td>

                        <td class="px-4 py-3 text-center">
                        <span class="bg-green-100 text-green-700 px-2 py-1 rounded text-xs">
                            Disponible
                        </span>
                        </td>

                        <td class="px-4 py-3 text-center">
                            <div class="flex justify-center gap-3 text-xs">

                                <a href="#" class="text-blue-600 hover:underline">
                                    Voir
                                </a>

                                <a href="#" class="text-gray-600 hover:underline">
                                    Éditer
                                </a>

                                <a href="#" class="text-red-600 hover:underline">
                                    Supprimer
                                </a>

                            </div>
                        </td>

                    </tr>
                {% else %}
                    <tr>
                        <td colspan="8" class="text-center py-10 text-gray-400">
                            Aucun véhicule
                        </td>
                    </tr>
                {% endfor %}

                </tbody>
            </table>
        </div>

    </div>
{% endblock %}
